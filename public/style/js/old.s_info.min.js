function checkCity(a){var b;return $.ajax({type:"POST",async:!1,url:ctx+"/jobs/checkCity.json",data:{city:a}}).done(function(a){b=a.success}),b}function img_check(a,b,c,d){var e=$("#"+d).val();this.AllowExt=".jpg,.gif,.jpeg,.png,.pjpeg",this.FileExt=a.value.substr(a.value.lastIndexOf(".")).toLowerCase(),0!=this.AllowExt&&-1==this.AllowExt.indexOf(this.FileExt)?$("#"+c+"_error").text("只支持jpg、gif、png、jpeg格式，请重新上传").show():($("#"+c+"_error").text("").hide(),$.ajaxFileUpload({url:b,secureuri:!1,fileElementId:c,data:{type:e},dataType:"text",success:function(a){""!=a?($("#logoShow img").attr("src",ctx+"/"+a),$("#logoNo").hide(),$("#logoShow").show(),$("#logo").val(a)):$("#"+c+"_error").text("上传失败，请重新上传").show()},error:function(){$("#"+c+"_error").text("上传失败，请重新上传").show()}}))}$(function(){var b,c,a=!1;window.onbeforeunload=function(){return a?void 0:"内容还未保存，确认离开该页面吗？ "},$("#stepTip a").bind("click",function(){$(this).parent("#stepTip").remove()}),b={expires:1},null==$.cookie("viewTimes")?($("#stepTip img").attr("src",ctx+"/images/tiponce.jpg").parent("#stepTip").fadeIn(200),$.cookie("viewTimes","1",b)):(c=parseInt($.cookie("viewTimes"))+1,$("#stepTip img").attr("src",ctx+"/images/tipagain.jpg").parent("#stepTip").fadeIn(200),$.cookie("viewTimes",c,b)),$(document).click(function(){var a=[];$("#box_industry li.current").length>1?alert("工作年龄最多可选1个"):($("#box_industry li.current").each(function(){a.push($(this).text())}),""==a.join()?$("#seeker_now").val("请选择工作年龄"):$("#seeker_now").val(a.join()),$("#seeker_email").val(a.join()),$("#box_industry").hide()),$("#box_industry").hide(),$("#box_scale").hide(),$("#stagesList .box_invest").hide()}),$("#seeker_now").bind("click",function(a){a.stopPropagation(),$("#box_industry").show(),$("#box_scale").hide(),$("#stagesList .box_invest").hide()}),$("#box_industry").on("click","ul li",function(a){a.stopPropagation();var b=[];$(this).hasClass("current")?($(this).removeClass("current"),$("#box_industry li.current").each(function(){b.push($(this).text())}),$("#seeker_now").val(b.join()),$("#seeker_email").val(b.join())):0==$(this).siblings("li.current").length?($(this).addClass("current"),b.push($(this).text()),$("#seeker_now").val(b.join()),$("#seeker_email").val(b.join())):1==$(this).siblings("li.current").length?($(this).addClass("current"),$("#box_industry li.current").each(function(){b.push($(this).text())}),$("#seeker_now").val(b.join()),$("#seeker_email").val(b.join()),$("#box_industry").hide()):$(this).siblings("li.current").length>=1&&alert("工作年龄最多可选1个"),$("#stepForm").validate().element("#seeker_email")}),$("#select_scale").bind("click",function(a){a.stopPropagation(),$("#box_scale").show(),$("#box_industry").hide(),$("#stagesList .box_invest").hide()}),$("#box_scale").on("click","ul li",function(a){a.stopPropagation();var b=$(this).text();$("#select_scale,#seeker_edu_education").val(b),$("#box_scale").hide(),$("#stepForm").validate().element("#seeker_edu_education")}),$("#box_industry,#box_scale").bind("click",function(a){a.stopPropagation()}),$(".s_radio li").click(function(){var b=$(this).text();$("#seeker_sex").val(b),$(this).addClass("current").append("<em></em>").siblings().removeClass("current").find("em").remove(),$("#stepForm").validate().element("#seeker_sex")}),$("#stagesList").on("click",".select_invest",function(a){a.stopPropagation(),$("#box_scale").hide(),$("#box_industry").hide(),$(this).parents("li").siblings().children(".box_invest").hide(),$(this).siblings(".box_invest").show()}),$("#stagesList").on("click",".box_invest li",function(a){var b,c;a.stopPropagation(),b=$(this).html(),c=$(this).parents("li"),$(".select_invest,.select_invest_hidden",c).val(b),$(this).parents(".box_invest").hide(),c.index()==$("#stagesList > li").length-1&&$("#stagesList > li").length<10&&c.children(".select_invest").trigger("change")}),$("#stagesList").on("change",".select_invest",function(){var a=$("#cloneInvest").html();$("#stagesList").append("<li>"+a+"</li>")}),$("#stepForm").validate({onkeyup:!1,focusCleanup:!0,rules:{name:{required:!0,specialchar:!0,maxlenStr:100},myfiles:{required:!1},seeker_user_phone:{required:!0,checkUrl:!0,maxlength:120},seeker_living:{required:!0,seeker_livingAvailable:!0,maxlenStr:20},seeker_email:{required:!0},seeker_edu_education:{required:!0},s_radio_hidden:{required:!0},select_invest_hidden:{required:!1},stageorg:{required:!1,maxlenStr:100},seeker_self:{required:!0,checkNum:!0,minlength:5,maxlenStr:50}},messages:{name:{required:"请输入本人姓名",specialchar:"请输入本人姓名"},seeker_user_phone:{required:"请输入你的手机号码"},seeker_living:{required:"请输入本人所在城市，如：北京",maxlenStr:"请输入有效的本人所在城市"},seeker_email:{required:"请选择你的邮箱地址"},seeker_edu_education:{required:"请选择你的学历"},seeker_sex:{required:"请选择本人性别"},seeker_self:{required:"请简单的做一个个人的自我介绍，限50字",minlength:"请输入5-50字的一句话介绍",maxlenStr:"请输入5-50字的一句话介绍"}},errorPlacement:function(a,b){"hidden"==b.attr("type")?a.insertAfter($(b).parent()):a.insertAfter(b)},submitHandler:function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o;a=!0,c=$("#companyId").val(),d=$("#companyName").val(),e=$("#name").val(),f=$("#seeker_img img").attr("src"),g=$("#seeker_user_phone").val(),"http://"!=g.substring(0,7)&&(g="http://"+g),h=$("#seeker_living").val(),i=$("#seeker_email").val(),j=$("#seeker_edu_education").val(),k=$("#s_radio_hidden").val(),l="",l+="[",$("#stagesList > li").each(function(a){m=$(this).children('input[name="select_invest_hidden"]').val(),n=$(this).children('input[name="stageorg"]').val()!=$(this).children('input[name="stageorg"]').attr("placeholder")?$(this).children('input[name="stageorg"]').val():"",l+=a==$("#stagesList > li").length-1?'{"stage":"'+m+'","org":"'+n+'"}':'{"stage":"'+m+'","org":"'+n+'"},'}),l+="]",o=$("#seeker_self").val(),$(b).find(":submit").attr("disabled",!0),$.ajax({type:"POST",data:{companyId:c,companyName:d,companyShortName:e,logo:f,companyUrl:g,seeker_living:h,industryField:i,companySize:j,financeStage:k,stages:l,companyFeatures:o},url:ctx+"/c/saveBaseInfo.json"}).done(function(a){a.success?window.location.href=ctx+"/c/tag.html":$("#beError").text(a.msg).show(),$(b).find(":submit").attr("disabled",!1)})}}),jQuery.validator.addMethod("seeker_livingAvailable",function(a,b){return this.optional(b)||checkseeker_living(a)},"请输入有效的公司所在城市，如：北京")});